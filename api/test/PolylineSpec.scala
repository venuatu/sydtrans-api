import models.JsonFormat
import models.Polyline.Coord
import org.specs2.mutable._
import org.specs2.runner._
import org.junit.runner._
import play.api.libs.json._
import models._

import play.api.test._
import play.api.test.Helpers._

/**
 * Add your spec here.
 * You can mock out a whole application including requests, plugins etc.
 * For more information, consult the wiki.
 */
@RunWith(classOf[JUnitRunner])
class PolylineSpec extends Specification {

  "gmap encoding" should {
    "decode" in {
      Polyline.decode("_p~iF~ps|U_ulLnnqC_mqNvxq`@") must beEqualTo(Vector(
        Coord(-38.50001f,120.19999f),
        Coord(-40.70002f,120.94998f),
        Coord(-43.252030000000005f,126.45297f)
      ))
    }

    "decode longer" in {
      println("moo")
      Polyline.decode("bi_qE}h{w[PaDAi@tAoUKK@OHIH@FRxF`@tBRl@@BUJETsEECCOBIFCXuDRw@Ti@`@i@gAmB??IQQy@AKEAGKBOHEFBzAcBfA}@`@Mb@CVHRLz@oM^oHyAS??xAR_@nHkAvQEbAHHnQzB??|El@DINGHFBPnEb@??|I|@rAl@JKLCLBRV?PGVf@n@lAn@??rBz@tK|D\\D^EdAk@GQ@KBKPIPHDJ?JlFhB`C~@iBgLMsA??IoCByCLu@xAgFDUDw@_@sH??SuDWwBkAcG??Mq@YcDjEt@\\MbAkN??p@cJT}BDq@??d@uHcSaC??wFs@cVuCmAX_RdI{ASkCO??uFWCLKDG?IGaM~P_@La@B_AIq@MmBq@_QiLq@]uAc@i@KiTmC??mOgBaCEqJF??gCBmI~e@??yAvIvI~@nJv@bO`B??dH~@`G~@DQPGHBJJdN|A??v@JhB@`AEz@MlBg@hAc@vAw@^tAjBrCdApBz@dArFbJrDvGbFpI?Hv@dDVpC`@bDx@pB\\b@`@N\\KFQ@YEWuAeB}BaAiASaD]mJYkFWe@BQDW\\Ml@BVKHEAuAnU@h@Q`D") must
        beEqualTo(Vector(
          Coord(-34.40802f,   150.87775f),
          Coord(-34.40811f,   150.87856f),
          Coord(-34.4081f,    150.87877f),
          Coord(-34.40853f,   150.88237f),
          Coord(-34.40847f,   150.88243f),
          Coord(-34.40848f,   150.8825f),
          Coord(-34.40853f,   150.88255f),
          Coord(-34.40858f,   150.88254f),
          Coord(-34.40862f,   150.88243f),
          Coord(-34.40987f,   150.88226f),
          Coord(-34.41046f,   150.88216f),
          Coord(-34.41069f,   150.88214f),
          Coord(-34.41071f,   150.88225f),
          Coord(-34.41077f,   150.88228f),
          Coord(-34.41088f,   150.88333f),
          Coord(-34.41085f,   150.88335f),
          Coord(-34.41083f,   150.88342f),
          Coord(-34.41085f,   150.88347f),
          Coord(-34.41089f,   150.88348f),
          Coord(-34.41102f,   150.8844f),
          Coord(-34.411118f,  150.88467f),
          Coord(-34.41123f,   150.88489f),
          Coord(-34.4114f,    150.8851f),
          Coord(-34.41104f,   150.88565f),
          Coord(-34.41104f,   150.88565f),
          Coord(-34.41099f,   150.88574f),
          Coord(-34.4109f,    150.88603f),
          Coord(-34.41089f,   150.8861f),
          Coord(-34.41086f,   150.88611f),
          Coord(-34.41082f,   150.88617f),
          Coord(-34.41084f,   150.88625f),
          Coord(-34.41089f,   150.88628f),
          Coord(-34.410927f,  150.88626f),
          Coord(-34.41139f,   150.88676f),
          Coord(-34.411747f,  150.88707f),
          Coord(-34.41192f,   150.88715f),
          Coord(-34.412098f,  150.88716f),
          Coord(-34.412216f,  150.88712f),
          Coord(-34.412315f,  150.88704f),
          Coord(-34.412617f,  150.88936f),
          Coord(-34.412777f,  150.89088f),
          Coord(-34.412327f,  150.89099f),
          Coord(-34.412327f,  150.89099f),
          Coord(-34.412777f,  150.89088f),
          Coord(-34.412617f,  150.88936f),
          Coord(-34.412235f,  150.88635f),
          Coord(-34.412205f,  150.88602f),
          Coord(-34.412254f,  150.88597f),
          Coord(-34.415215f,  150.88535f),
          Coord(-34.415215f,  150.88535f),
          Coord(-34.416325f,  150.88512f),
          Coord(-34.416355f,  150.88516f),
          Coord(-34.416435f,  150.88521f),
          Coord(-34.416485f,  150.88516f),
          Coord(-34.416504f,  150.88507f),
          Coord(-34.417545f,  150.88489f),
          Coord(-34.417545f,  150.88489f),
          Coord(-34.419296f,  150.88458f),
          Coord(-34.419716f,  150.88435f),
          Coord(-34.419777f,  150.88441f),
          Coord(-34.419846f,  150.88443f),
          Coord(-34.419914f,  150.88441f),
          Coord(-34.420013f,  150.8843f),
          Coord(-34.420013f,  150.8842f),
          Coord(-34.419975f,  150.88408f),
          Coord(-34.420174f,  150.88383f),
          Coord(-34.420563f,  150.88359f),
          Coord(-34.420563f,  150.88359f),
          Coord(-34.421143f,  150.88329f),
          Coord(-34.423172f,  150.88234f),
          Coord(-34.42332f,   150.88231f),
          Coord(-34.42348f,   150.88234f),
          Coord(-34.423832f,  150.88255f),
          Coord(-34.423794f,  150.88264f),
          Coord(-34.423805f,  150.8827f),
          Coord(-34.423824f,  150.88277f),
          Coord(-34.423916f,  150.88281f),
          Coord(-34.424007f,  150.88277f),
          Coord(-34.424038f,  150.8827f),
          Coord(-34.424038f,  150.88264f),
          Coord(-34.42523f,   150.88211f),
          Coord(-34.425877f,  150.88179f),
          Coord(-34.425346f,  150.88391f),
          Coord(-34.425278f,  150.88434f),
          Coord(-34.425278f,  150.88434f),
          Coord(-34.42523f,   150.88506f),
          Coord(-34.425247f,  150.88582f),
          Coord(-34.425316f,  150.8861f),
          Coord(-34.425766f,  150.88725f),
          Coord(-34.425797f,  150.88736f),
          Coord(-34.425827f,  150.88763f),
          Coord(-34.425667f,  150.88918f),
          Coord(-34.425667f,  150.88918f),
          Coord(-34.425568f,  150.89009f),
          Coord(-34.42545f,   150.89069f),
          Coord(-34.425068f,  150.89198f),
          Coord(-34.425068f,  150.89198f),
          Coord(-34.425f,     150.89223f),
          Coord(-34.42487f,   150.89305f),
          Coord(-34.425888f,  150.89278f),
          Coord(-34.426037f,  150.89285f),
          Coord(-34.426376f,  150.89531f),
          Coord(-34.426376f,  150.89531f),
          Coord(-34.42663f,   150.8971f),
          Coord(-34.42674f,   150.89772f),
          Coord(-34.42677f,   150.89796f),
          Coord(-34.42677f,   150.89796f),
          Coord(-34.42696f,   150.89952f),
          Coord(-34.42374f,   150.90018f),
          Coord(-34.42374f,   150.90018f),
          Coord(-34.4225f,    150.90044f),
          Coord(-34.4188f,    150.90118f),
          Coord(-34.41841f,   150.90105f),
          Coord(-34.41537f,   150.89941f),
          Coord(-34.41491f,   150.89952f),
          Coord(-34.414207f,  150.8996f),
          Coord(-34.414207f,  150.8996f),
          Coord(-34.41298f,   150.89972f),
          Coord(-34.41296f,   150.89964f),
          Coord(-34.4129f,    150.89961f),
          Coord(-34.41286f,   150.89961f),
          Coord(-34.41281f,   150.89966f),
          Coord(-34.41056f,   150.89677f),
          Coord(-34.4104f,    150.8967f),
          Coord(-34.41023f,   150.89668f),
          Coord(-34.40991f,   150.89673f),
          Coord(-34.409657f,  150.8968f),
          Coord(-34.409107f,  150.89705f),
          Coord(-34.406227f,  150.89919f),
          Coord(-34.405975f,  150.89934f),
          Coord(-34.405544f,  150.89952f),
          Coord(-34.405334f,  150.89958f),
          Coord(-34.401924f,  150.9003f),
          Coord(-34.401924f,  150.9003f),
          Coord(-34.399296f,  150.90082f),
          Coord(-34.398647f,  150.90085f),
          Coord(-34.396797f,  150.9008f),
          Coord(-34.396797f,  150.9008f),
          Coord(-34.39612f,   150.90079f),
          Coord(-34.394447f,  150.89455f),
          Coord(-34.394447f,  150.89455f),
          Coord(-34.393997f,  150.89282f),
          Coord(-34.395718f,  150.8925f),
          Coord(-34.397556f,  150.89223f),
          Coord(-34.400135f,  150.89174f),
          Coord(-34.400135f,  150.89174f),
          Coord(-34.401604f,  150.89142f),
          Coord(-34.402893f,  150.8911f),
          Coord(-34.402924f,  150.89119f),
          Coord(-34.403015f,  150.89124f),
          Coord(-34.403065f,  150.89122f),
          Coord(-34.403126f,  150.89116f),
          Coord(-34.405556f,  150.89069f),
          Coord(-34.405556f,  150.89069f),
          Coord(-34.405834f,  150.89062f),
          Coord(-34.406364f,  150.89061f),
          Coord(-34.406696f,  150.89064f),
          Coord(-34.406998f,  150.89072f),
          Coord(-34.407547f,  150.89091f),
          Coord(-34.407917f,  150.8911f),
          Coord(-34.408356f,  150.89137f),
          Coord(-34.408516f,  150.89095f),
          Coord(-34.409058f,  150.89021f),
          Coord(-34.40941f,   150.88965f),
          Coord(-34.40971f,   150.8893f),
          Coord(-34.41093f,   150.88751f),
          Coord(-34.41183f,   150.88611f),
          Coord(-34.41297f,   150.88441f),
          Coord(-34.41297f,   150.88437f),
          Coord(-34.41325f,   150.88354f),
          Coord(-34.41337f,   150.88281f),
          Coord(-34.41354f,   150.88199f),
          Coord(-34.41383f,   150.88142f),
          Coord(-34.41398f,   150.88124f),
          Coord(-34.41415f,   150.88116f),
          Coord(-34.4143f,    150.88123f),
          Coord(-34.414337f,  150.88132f),
          Coord(-34.41435f,   150.88145f),
          Coord(-34.414318f,  150.88158f),
          Coord(-34.413887f,  150.88208f),
          Coord(-34.413258f,  150.88242f),
          Coord(-34.412888f,  150.88252f),
          Coord(-34.41208f,   150.88268f),
          Coord(-34.410248f,  150.88281f),
          Coord(-34.40907f,   150.88293f),
          Coord(-34.40888f,   150.88292f),
          Coord(-34.408787f,  150.88289f),
          Coord(-34.40867f,   150.88274f),
          Coord(-34.4086f,    150.8825f),
          Coord(-34.40862f,   150.88239f),
          Coord(-34.408558f,  150.88234f),
          Coord(-34.408527f,  150.88235f),
          Coord(-34.408096f,  150.87875f),
          Coord(-34.408108f,  150.87854f),
          Coord(-34.408016f,  150.87773f)
      ))
    }

    "chunk decode" in {
      Polyline.getChunks("cgl~Fde}uOpx@_Ndj@iC") must beEqualTo(List(
        Seq(4, 8, 13, 31, 7), Seq(5, 6, 30, 22, 16), Seq(17, 25, 1), Seq(0, 15), Seq(5, 11, 1), Seq(10, 4)
      ))
    }

    "encode" in {
      Polyline.encode(Seq(
        Coord(38.5f, -120.2f),
        Coord(40.7f, -120.95f),
        Coord(43.252f, -126.453f)
      )) must be_==("_p~iF~ps|U_ulLnnqC_mqNvxq`@")
    }

    "encode longer" in {
      Polyline.encode(Seq(
        Coord(-34.40802f,   150.87775f),
        Coord(-34.40811f,   150.87856f),
        Coord(-34.4081f,    150.87877f),
        Coord(-34.40853f,   150.88237f),
        Coord(-34.40847f,   150.88243f),
        Coord(-34.40848f,   150.8825f),
        Coord(-34.40853f,   150.88255f),
        Coord(-34.40858f,   150.88254f),
        Coord(-34.40862f,   150.88243f),
        Coord(-34.40987f,   150.88226f),
        Coord(-34.41046f,   150.88216f),
        Coord(-34.41069f,   150.88214f),
        Coord(-34.41071f,   150.88225f),
        Coord(-34.41077f,   150.88228f),
        Coord(-34.41088f,   150.88333f),
        Coord(-34.41085f,   150.88335f),
        Coord(-34.41083f,   150.88342f),
        Coord(-34.41085f,   150.88347f),
        Coord(-34.41089f,   150.88348f),
        Coord(-34.41102f,   150.8844f),
        Coord(-34.411118f,  150.88467f),
        Coord(-34.41123f,   150.88489f),
        Coord(-34.4114f,    150.8851f),
        Coord(-34.41104f,   150.88565f),
        Coord(-34.41104f,   150.88565f),
        Coord(-34.41099f,   150.88574f),
        Coord(-34.4109f,    150.88603f),
        Coord(-34.41089f,   150.8861f),
        Coord(-34.41086f,   150.88611f),
        Coord(-34.41082f,   150.88617f),
        Coord(-34.41084f,   150.88625f),
        Coord(-34.41089f,   150.88628f),
        Coord(-34.410927f,  150.88626f),
        Coord(-34.41139f,   150.88676f),
        Coord(-34.411747f,  150.88707f),
        Coord(-34.41192f,   150.88715f),
        Coord(-34.412098f,  150.88716f),
        Coord(-34.412216f,  150.88712f),
        Coord(-34.412315f,  150.88704f),
        Coord(-34.412617f,  150.88936f),
        Coord(-34.412777f,  150.89088f),
        Coord(-34.412327f,  150.89099f),
        Coord(-34.412327f,  150.89099f),
        Coord(-34.412777f,  150.89088f),
        Coord(-34.412617f,  150.88936f),
        Coord(-34.412235f,  150.88635f),
        Coord(-34.412205f,  150.88602f),
        Coord(-34.412254f,  150.88597f),
        Coord(-34.415215f,  150.88535f),
        Coord(-34.415215f,  150.88535f),
        Coord(-34.416325f,  150.88512f),
        Coord(-34.416355f,  150.88516f),
        Coord(-34.416435f,  150.88521f),
        Coord(-34.416485f,  150.88516f),
        Coord(-34.416504f,  150.88507f),
        Coord(-34.417545f,  150.88489f),
        Coord(-34.417545f,  150.88489f),
        Coord(-34.419296f,  150.88458f),
        Coord(-34.419716f,  150.88435f),
        Coord(-34.419777f,  150.88441f),
        Coord(-34.419846f,  150.88443f),
        Coord(-34.419914f,  150.88441f),
        Coord(-34.420013f,  150.8843f),
        Coord(-34.420013f,  150.8842f),
        Coord(-34.419975f,  150.88408f),
        Coord(-34.420174f,  150.88383f),
        Coord(-34.420563f,  150.88359f),
        Coord(-34.420563f,  150.88359f),
        Coord(-34.421143f,  150.88329f),
        Coord(-34.423172f,  150.88234f),
        Coord(-34.42332f,   150.88231f),
        Coord(-34.42348f,   150.88234f),
        Coord(-34.423832f,  150.88255f),
        Coord(-34.423794f,  150.88264f),
        Coord(-34.423805f,  150.8827f),
        Coord(-34.423824f,  150.88277f),
        Coord(-34.423916f,  150.88281f),
        Coord(-34.424007f,  150.88277f),
        Coord(-34.424038f,  150.8827f),
        Coord(-34.424038f,  150.88264f),
        Coord(-34.42523f,   150.88211f),
        Coord(-34.425877f,  150.88179f),
        Coord(-34.425346f,  150.88391f),
        Coord(-34.425278f,  150.88434f),
        Coord(-34.425278f,  150.88434f),
        Coord(-34.42523f,   150.88506f),
        Coord(-34.425247f,  150.88582f),
        Coord(-34.425316f,  150.8861f),
        Coord(-34.425766f,  150.88725f),
        Coord(-34.425797f,  150.88736f),
        Coord(-34.425827f,  150.88763f),
        Coord(-34.425667f,  150.88918f),
        Coord(-34.425667f,  150.88918f),
        Coord(-34.425568f,  150.89009f),
        Coord(-34.42545f,   150.89069f),
        Coord(-34.425068f,  150.89198f),
        Coord(-34.425068f,  150.89198f),
        Coord(-34.425f,     150.89223f),
        Coord(-34.42487f,   150.89305f),
        Coord(-34.425888f,  150.89278f),
        Coord(-34.426037f,  150.89285f),
        Coord(-34.426376f,  150.89531f),
        Coord(-34.426376f,  150.89531f),
        Coord(-34.42663f,   150.8971f),
        Coord(-34.42674f,   150.89772f),
        Coord(-34.42677f,   150.89796f),
        Coord(-34.42677f,   150.89796f),
        Coord(-34.42696f,   150.89952f),
        Coord(-34.42374f,   150.90018f),
        Coord(-34.42374f,   150.90018f),
        Coord(-34.4225f,    150.90044f),
        Coord(-34.4188f,    150.90118f),
        Coord(-34.41841f,   150.90105f),
        Coord(-34.41537f,   150.89941f),
        Coord(-34.41491f,   150.89952f),
        Coord(-34.414207f,  150.8996f),
        Coord(-34.414207f,  150.8996f),
        Coord(-34.41298f,   150.89972f),
        Coord(-34.41296f,   150.89964f),
        Coord(-34.4129f,    150.89961f),
        Coord(-34.41286f,   150.89961f),
        Coord(-34.41281f,   150.89966f),
        Coord(-34.41056f,   150.89677f),
        Coord(-34.4104f,    150.8967f),
        Coord(-34.41023f,   150.89668f),
        Coord(-34.40991f,   150.89673f),
        Coord(-34.409657f,  150.8968f),
        Coord(-34.409107f,  150.89705f),
        Coord(-34.406227f,  150.89919f),
        Coord(-34.405975f,  150.89934f),
        Coord(-34.405544f,  150.89952f),
        Coord(-34.405334f,  150.89958f),
        Coord(-34.401924f,  150.9003f),
        Coord(-34.401924f,  150.9003f),
        Coord(-34.399296f,  150.90082f),
        Coord(-34.398647f,  150.90085f),
        Coord(-34.396797f,  150.9008f),
        Coord(-34.396797f,  150.9008f),
        Coord(-34.39612f,   150.90079f),
        Coord(-34.394447f,  150.89455f),
        Coord(-34.394447f,  150.89455f),
        Coord(-34.393997f,  150.89282f),
        Coord(-34.395718f,  150.8925f),
        Coord(-34.397556f,  150.89223f),
        Coord(-34.400135f,  150.89174f),
        Coord(-34.400135f,  150.89174f),
        Coord(-34.401604f,  150.89142f),
        Coord(-34.402893f,  150.8911f),
        Coord(-34.402924f,  150.89119f),
        Coord(-34.403015f,  150.89124f),
        Coord(-34.403065f,  150.89122f),
        Coord(-34.403126f,  150.89116f),
        Coord(-34.405556f,  150.89069f),
        Coord(-34.405556f,  150.89069f),
        Coord(-34.405834f,  150.89062f),
        Coord(-34.406364f,  150.89061f),
        Coord(-34.406696f,  150.89064f),
        Coord(-34.406998f,  150.89072f),
        Coord(-34.407547f,  150.89091f),
        Coord(-34.407917f,  150.8911f),
        Coord(-34.408356f,  150.89137f),
        Coord(-34.408516f,  150.89095f),
        Coord(-34.409058f,  150.89021f),
        Coord(-34.40941f,   150.88965f),
        Coord(-34.40971f,   150.8893f),
        Coord(-34.41093f,   150.88751f),
        Coord(-34.41183f,   150.88611f),
        Coord(-34.41297f,   150.88441f),
        Coord(-34.41297f,   150.88437f),
        Coord(-34.41325f,   150.88354f),
        Coord(-34.41337f,   150.88281f),
        Coord(-34.41354f,   150.88199f),
        Coord(-34.41383f,   150.88142f),
        Coord(-34.41398f,   150.88124f),
        Coord(-34.41415f,   150.88116f),
        Coord(-34.4143f,    150.88123f),
        Coord(-34.414337f,  150.88132f),
        Coord(-34.41435f,   150.88145f),
        Coord(-34.414318f,  150.88158f),
        Coord(-34.413887f,  150.88208f),
        Coord(-34.413258f,  150.88242f),
        Coord(-34.412888f,  150.88252f),
        Coord(-34.41208f,   150.88268f),
        Coord(-34.410248f,  150.88281f),
        Coord(-34.40907f,   150.88293f),
        Coord(-34.40888f,   150.88292f),
        Coord(-34.408787f,  150.88289f),
        Coord(-34.40867f,   150.88274f),
        Coord(-34.4086f,    150.8825f),
        Coord(-34.40862f,   150.88239f),
        Coord(-34.408558f,  150.88234f),
        Coord(-34.408527f,  150.88235f),
        Coord(-34.408096f,  150.87875f),
        Coord(-34.408108f,  150.87854f),
        Coord(-34.408016f,  150.87773f)
      )) must beEqualTo("bi_qE}h{w[PaDAi@tAoUKK@OHIH@FRxF`@tBRl@@BUJETsEECCOBIFCXuDRw@Ti@~AoBDU?[Ke@aCmFg@aAcDkFsAoBy@eAEBaIqDc@Y]c@}B\\_AB_A?aDY??gLmAGJQBQMASaG_AgGw@??aPiBwIu@oJaA|@qF??hDgSv@aEdBeK??`@uBxNK`CD|Gt@hNfB??nLvAh@JtAb@p@\\~PhLlBp@p@L~@H`@C^M`M_QEGDWHGJ@FDBR`Kf@LoB??RcCz@@jNeG??pAe@vF}C|Bi@nA_@l@YdCyAtAqAvAtA??bBdBsArQrFr@??`TfCUlD??UxDU|BoAhQ??e@dG]LkEu@XbDDN??hA|F^nCp@vM??B`@Ev@_B|FMt@CxC??BdBkEsAy@nLHBFH?VKNMBKGeAj@_@D]E{NoF??{Ay@g@o@SL[GGKCQ?OFMsAm@mPaBEJMDKECQaAO??qQyByCa@IIDcAjAwQ^oHyAS??xAR_@nH{@nMSMWIc@Ba@LgA|@{AbBDRKH?LPx@pA~Ba@h@KV??]hAIr@M`CD?FL?HQJUpEH@HL?LGHIDMGCIm@AuBSyFa@CJGDEAuAnU@h@Q`D")
    }

    "encode corner" in {
      Polyline.encode(Vector(
        Coord(-34.4080213758045, 150.877754091943),
        Coord(-34.4081128385564, 150.878562837535),
        Coord(-34.4081059440977, 150.878779956254),
        Coord(-34.4085323286503, 150.882376527701),
        Coord(-34.4084762729541, 150.88243916537),
        Coord(-34.4084828550641, 150.882515573247),
        Coord(-34.4085354601256, 150.882561495046),
        Coord(-34.4085897905357, 150.882553137166),
        Coord(-34.4086288863708, 150.882457098963),
        Coord(-34.4098777955731, 150.882286576437),
        Coord(-34.4104667774946, 150.882183364311),
        Coord(-34.4106924065429, 150.882172060263),
        Coord(-34.4107159486019, 150.882281871542),
        Coord(-34.4107778962895, 150.882317354685),
        Coord(-34.4108883807103, 150.883377071947),
        Coord(-34.4108517002027, 150.883397118535),
        Coord(-34.4108312889288, 150.88347227918),
        Coord(-34.410856555681, 150.883527809756),
        Coord(-34.4108922006726, 150.883540331925),
        Coord(-34.4110251578067, 150.884459753337),
        Coord(-34.4111244963073, 150.884736158622),
        Coord(-34.4112349035228, 150.884947843613),
        Coord(-34.4117128459555, 150.885502718761),
        Coord(-34.4117453823771, 150.885612948767),
        Coord(-34.4117408924765, 150.885754080861),
        Coord(-34.41168069033, 150.885946993941),
        Coord(-34.4110391668138, 150.887134967875),
        Coord(-34.4108305108553, 150.887462338201),
        Coord(-34.4100180218225, 150.888642364275),
        Coord(-34.4095944699526, 150.889209822463),
        Coord(-34.4093041403982, 150.889555139749),
        Coord(-34.4092778393527, 150.889532176542),
        Coord(-34.4076635134558, 150.890424929845),
        Coord(-34.4074880664966, 150.890558127746),
        Coord(-34.4073382286998, 150.890735999422),
        Coord(-34.4067032117451, 150.890586967043),
        Coord(-34.4063886459362, 150.890561510477),
        Coord(-34.406064045344, 150.890568203613),
        Coord(-34.4052580836939, 150.890693908057),
        Coord(-34.4052580836939, 150.890693908057),
        Coord(-34.4031371150828, 150.891084777992),
        Coord(-34.4030938566071, 150.891028416491),
        Coord(-34.4030045734156, 150.891002534607),
        Coord(-34.4029121782499, 150.891074348736),
        Coord(-34.4029000687357, 150.891171627491),
        Coord(-34.4016193223874, 150.891492729951),
        Coord(-34.4002946257644, 150.891779174144),
        Coord(-34.4002946257644, 150.891779174144),
        Coord(-34.3975656378443, 150.892304868787),
        Coord(-34.3958450518834, 150.89257293466),
        Coord(-34.3940054234744, 150.892900692707),
        Coord(-34.3943182735408, 150.894110900837),
        Coord(-34.3943182735408, 150.894110900837),
        Coord(-34.3951608989193, 150.897356669194),
        Coord(-34.3954453329076, 150.898326446297),
        Coord(-34.3959598455323, 150.900274364073),
        Coord(-34.3959598455323, 150.900274364073),
        Coord(-34.3961210789034, 150.900868846708),
        Coord(-34.3986514212512, 150.900921216441),
        Coord(-34.3993009652468, 150.900897051557),
        Coord(-34.4007332952973, 150.900626628021),
        Coord(-34.403182689085, 150.900109946012),
        Coord(-34.403182689085, 150.900109946012),
        Coord(-34.4053413934124, 150.899666703313),
        Coord(-34.4055597564031, 150.899600751034),
        Coord(-34.4059888711424, 150.899425005914),
        Coord(-34.4062369985103, 150.899273463553),
        Coord(-34.4091162464152, 150.897145910939),
        Coord(-34.4096647494963, 150.896899588682),
        Coord(-34.40991944755, 150.896824442393),
        Coord(-34.4102364346999, 150.8967739329),
        Coord(-34.4104070389775, 150.896792728888),
        Coord(-34.4105669140594, 150.89686538718),
        Coord(-34.4128178770379, 150.899742404746),
        Coord(-34.4127894983971, 150.899784575067),
        Coord(-34.4128126774182, 150.899905248805),
        Coord(-34.4128656216514, 150.899940327244),
        Coord(-34.41292894985, 150.899932398873),
        Coord(-34.412965979258, 150.899901503099),
        Coord(-34.4129870937951, 150.899804633009),
        Coord(-34.4149128917827, 150.899600599953),
        Coord(-34.4149848387919, 150.900169323311),
        Coord(-34.4149848387919, 150.900169323311),
        Coord(-34.4150810011667, 150.900826154975),
        Coord(-34.4153876045977, 150.900818667574),
        Coord(-34.4178417179603, 150.902128832229),
        Coord(-34.4178417179603, 150.902128832229),
        Coord(-34.4182503917199, 150.902310941458),
        Coord(-34.4194954219335, 150.903108250049),
        Coord(-34.4201286794916, 150.903311694075),
        Coord(-34.4205200500742, 150.903471262998),
        Coord(-34.4207591601099, 150.903601999611),
        Coord(-34.4214294199509, 150.904057264025),
        Coord(-34.4218577918066, 150.90446865354),
        Coord(-34.4222952439445, 150.904032329597),
        Coord(-34.4222952439445, 150.904032329597),
        Coord(-34.4227981054014, 150.903522930315),
        Coord(-34.4223796209016, 150.900545825942),
        Coord(-34.4235953216834, 150.900287032761),
        Coord(-34.4235953216834, 150.900287032761),
        Coord(-34.4269690348437, 150.899606645864),
        Coord(-34.426852813769, 150.89873130323),
        Coord(-34.426852813769, 150.89873130323),
        Coord(-34.4267473165406, 150.897802090201),
        Coord(-34.4266321096748, 150.897176905441),
        Coord(-34.4262300872838, 150.894243947258),
        Coord(-34.4262300872838, 150.894243947258),
        Coord(-34.4260466965156, 150.892930533463),
        Coord(-34.4258954710846, 150.892869141866),
        Coord(-34.4248777218284, 150.893137238177),
        Coord(-34.425002998428, 150.8923166301),
        Coord(-34.4250327593374, 150.892231019459),
        Coord(-34.4250327593374, 150.892231019459),
        Coord(-34.4254064947834, 150.890965227944),
        Coord(-34.4255646340428, 150.890244002143),
        Coord(-34.4258109700041, 150.887884870943),
        Coord(-34.4258109700041, 150.887884870943),
        Coord(-34.4258344959592, 150.887711975573),
        Coord(-34.4258071477501, 150.88743885422),
        Coord(-34.4253250372367, 150.886165984512),
        Coord(-34.4252526979351, 150.885890780194),
        Coord(-34.4252318940027, 150.885128631258),
        Coord(-34.4252318940027, 150.885128631258),
        Coord(-34.4252571263959, 150.884618718799),
        Coord(-34.4242345526318, 150.885038927069),
        Coord(-34.4239430275268, 150.882872386938),
        Coord(-34.4239977031764, 150.882853170775),
        Coord(-34.4240354194529, 150.882800547539),
        Coord(-34.4240392169082, 150.882681110178),
        Coord(-34.4239786506779, 150.882602188447),
        Coord(-34.4239070156205, 150.882587997814),
        Coord(-34.4238426520471, 150.882628513389),
        Coord(-34.4234983070008, 150.882405966915),
        Coord(-34.4233370417207, 150.882376753147),
        Coord(-34.4231830480434, 150.882402245251),
        Coord(-34.4206489591137, 150.883600624557),
        Coord(-34.4206489591137, 150.883600624557),
        Coord(-34.4201890696542, 150.883894658122),
        Coord(-34.4199831821881, 150.884135211707),
        Coord(-34.4198862812816, 150.884065483793),
        Coord(-34.4197499372066, 150.884102663067),
        Coord(-34.4197028777357, 150.884165723832),
        Coord(-34.4196821201664, 150.884251749334),
        Coord(-34.4196883551024, 150.884339024911),
        Coord(-34.4197222732035, 150.884405835924),
        Coord(-34.4193094419755, 150.884636801992),
        Coord(-34.4165185209938, 150.885127302479),
        Coord(-34.4164846031209, 150.885060493897),
        Coord(-34.4164133136991, 150.885035446165),
        Coord(-34.4163582925056, 150.885065516537),
        Coord(-34.4163375345408, 150.885151538399),
        Coord(-34.4160015180622, 150.885233830882),
        Coord(-34.4160015180622, 150.885233830882),
        Coord(-34.4130354986122, 150.885846662186),
        Coord(-34.4122641471661, 150.88601750896),
        Coord(-34.4122174325312, 150.886069706959),
        Coord(-34.4122427142317, 150.886407921632),
        Coord(-34.412624892387, 150.889404668299),
        Coord(-34.4127837703309, 150.890923301425),
        Coord(-34.4123390903803, 150.891022273232),
        Coord(-34.4123390903803, 150.891022273232),
        Coord(-34.4127837703309, 150.890923301425),
        Coord(-34.412624892387, 150.889404668299),
        Coord(-34.4123292647865, 150.887086018864),
        Coord(-34.4122278736984, 150.887157427624),
        Coord(-34.4121001811076, 150.887205872839),
        Coord(-34.4119205765874, 150.887186678619),
        Coord(-34.4117516970887, 150.88711361992),
        Coord(-34.4113921275816, 150.886803409107),
        Coord(-34.4109394568344, 150.886304060773),
        Coord(-34.4109605606484, 150.886207188482),
        Coord(-34.4109083026327, 150.886150406849),
        Coord(-34.4109013775669, 150.886084852881),
        Coord(-34.4109916808224, 150.885795485937),
        Coord(-34.4114086383295, 150.885151589528),
        Coord(-34.4112349035228, 150.884947843613),
        Coord(-34.4111757191467, 150.884825508357),
        Coord(-34.4111757191467, 150.884825508357),
        Coord(-34.4110251578067, 150.884459753337),
        Coord(-34.4109794586087, 150.884196704226),
        Coord(-34.410901198215, 150.883540748411),
        Coord(-34.4109371883846, 150.883542414356),
        Coord(-34.4109752496188, 150.883478942842),
        Coord(-34.4109769754799, 150.883424661619),
        Coord(-34.4108887258746, 150.883366215712),
        Coord(-34.4107778962895, 150.882317354685),
        Coord(-34.4108232291377, 150.882308580212),
        Coord(-34.4108706323825, 150.882234668255),
        Coord(-34.4108727027448, 150.882169530772),
        Coord(-34.4108384377893, 150.882113584201),
        Coord(-34.4107851425435, 150.882089373738),
        Coord(-34.4107117818755, 150.882129468026),
        Coord(-34.4106924065429, 150.882172060263),
        Coord(-34.4104667774946, 150.882183364311),
        Coord(-34.4098777955731, 150.882286576437),
        Coord(-34.4086288863708, 150.882457098963),
        Coord(-34.4086039640598, 150.882390714253),
        Coord(-34.4085686639391, 150.882367337052),
        Coord(-34.4085323286503, 150.882376527701),
        Coord(-34.4081059440977, 150.878779956254),
        Coord(-34.4081128385564, 150.878562837535),
        Coord(-34.4080213758045, 150.877754091943)
      )) must beEqualTo("bi_qE{h{w[PaDAi@tAoUKM@MHIHBDRzF`@tBTl@@@SLETsEEACOBGDCXuDRw@Ti@`@k@eAmB??IQQy@CKEAEK@OHEF@zAcBfA{@`@Ob@CVHRNz@oM^qHyAU??xAT_@pHkAvQEbAHFnQ|B??|El@DINGHFBPnEd@??|Iz@rAl@JKLAL@RV?PGXf@n@lAn@??rB|@tK|D\\D^EdAk@GQ@KBKPIPHDJ?JlFhB`C~@iBgLMsA??IoCBwCLw@xAgFDSDw@_@sH??SwDWuBkAcG??Mo@YeDjEv@\\ObAiN??p@eJT}BDo@??d@wHaSaC??wFs@cVuCmAZ_RdI}AUkCM??uFWALMDE?IGaM~P_@Nc@@_AGq@OmBo@_QkLq@]uAe@i@KiTmC??mOgBaCEqJF??gCBmI~e@??yAvIvI~@nJv@bO`B??dH~@`G~@DQPIH@JLdN|A??v@JhBB`AGz@MlBg@hAc@vAw@^tAjBpCdApBz@dAtFbJrDxGbFpI?Ht@bDVpC`@dDx@nB\\b@b@NZKFQ@[EWuAeB}BaAiAUaD]mJ[kFWe@BQDW\\Ml@BVKHECuAnU@h@Q`D")
    }

    "encode coord" in {
      // from: https://developers.google.com/maps/documentation/utilities/polylinealgorithm
      Polyline.encodeCoord(3850000).mkString must beEqualTo("_p~iF")

      Polyline.encodeCoord(4070000 - 3850000).mkString must beEqualTo("_ulL")

      Polyline.encodeCoord(4325200 - 4070000).mkString must beEqualTo("_mqN")
    }
  }
}
